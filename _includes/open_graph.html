{% comment %}
  Open Graph & Twitter Card meta tags.
  Fallback chain for description: page.description > page.summary > page.excerpt > site.description
  Fallback chain for title: page.title > site.name
  Fallback chain for image: page.image > site.default_image
{% endcomment %}

{% assign og_title = page.title | default: site.name %}
{% assign og_description = page.description | default: page.summary | default: page.excerpt | strip_html | truncate: 200 | default: site.description %}
{% assign og_url = page.url | prepend: site.url %}
{% if page.image %}
  {% assign og_image = page.image | prepend: site.url %}
{% elsif site.default_image %}
  {% assign og_image = site.default_image | prepend: site.url %}
{% endif %}

<!-- Open Graph -->
<meta property="og:title" content="{{ og_title }}">
<meta property="og:description" content="{{ og_description }}">
<meta property="og:url" content="{{ og_url }}">
<meta property="og:site_name" content="{{ site.name }}">
{% if page.layout == 'writing' or page.layout == 'post' %}
<meta property="og:type" content="article">
{% if page.date %}<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">{% endif %}
{% else %}
<meta property="og:type" content="website">
{% endif %}
{% if og_image %}<meta property="og:image" content="{{ og_image }}">{% endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="{% if og_image %}summary_large_image{% else %}summary{% endif %}">
{% if site.twitter_username %}<meta name="twitter:site" content="@{{ site.twitter_username }}">{% endif %}
<meta name="twitter:title" content="{{ og_title }}">
<meta name="twitter:description" content="{{ og_description }}">
{% if og_image %}<meta name="twitter:image" content="{{ og_image }}">{% endif %}
